<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card cst-card">
                <div class="card-title">
                    <div class="float-left">
                        <h4 class="text">Upload files</h4>
                    </div>
                </div>
                <div class="card-body inline-form">
                    <form role="form" name="uploadDocument.uploadFileForm" id="uploadFileForm" novalidate>
                        <div class="row">
                            <div class="col-12">
                                <label for="upload" control-label>Choose file to Upload by clicking on the Upload
                                    button:</label>
                                <div class="form-group">
                                    <div class="col-md-10  col-sm-12 text-center mx-auto"
                                        flow-init="uploadDocument.uploadFile"
                                        flow-file-added="uploadDocument.upload($file, $event, $flow)"
                                        flow-files-submitted="uploadDocument.uploadFn($files, $event, $flow)"
                                        flow-file-success="uploadDocument.getUploadResponse( $file, $message, $flow )">
                                        <div ng-repeat="file in uploadDocument.flow.files">
                                            <div class="progress" ng-class="{active: file.isUploading()}"
                                                ng-if="file.progress() !== 1">
                                                <div class="progress-bar bg-success progress-bar-striped progress-bar-animated"
                                                    role="progressbar" aria-valuenow="100" aria-valuemin="0"
                                                    aria-valuemax="100"
                                                    ng-style="{width: (file.progress() * 100) + '%'}"
                                                    style="width: 100%;">
                                                </div>
                                            </div>
                                            <div ng-if="file.progress() !== 1" class="mt-2 alert alert-success ">
                                                <span class="text-center">"{{file.name}}" Uploading...<em
                                                        class="fa fa-cog fa-spin fa-1x"></em></span>
                                            </div>
                                            <div ng-if="file.progress() === 1" class="mt-2 alert alert-success ">
                                                <span class="text-center">
                                                    <em class="fa fa-check fa-1x"></em>{{file.name}},
                                                    Uploaded Successfully </span>
                                                <span class="pull-right"><em class="fa fa-close fa-1x"
                                                        style="cursor: pointer"
                                                        ng-click="uploadDocument.removeDocument(file.name)">
                                                    </em>
                                                </span>
                                            </div>
                                        </div>
                                        <button flow-btn class="mx-auto btn btn-primary bg-success"><em
                                                class="ion-ios-cloud-upload-outline"></em>
                                            Upload
                                        </button>
                                        <div ng-if="uploadDocument.isFormatError"
                                            class="mx-auto mt-4 alert alert-danger">
                                            <span class="text-center">Please upload valid format file!!</span>
                                        </div>
                                        <div ng-if="uploadDocument.isSizeError" class="mx-auto mt-4 alert alert-danger">
                                            <span class="text-center">Your file is larger than 50MB. Plase upload
                                                valid size(< 50MB) file!!</span>
                                        </div>
                                        <div ng-if="uploadDocument.isDataLoading === true"
                                            class="mx-auto mt-4 alert alert-info">
                                            <span class="text-center processing-cog">Processing...
                                                <em class="fa fa-cog fa-spin fa-1x">
                                                </em>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="alert alert-danger valid-feedback"
                                        ng-if="uploadDocument.isUploadFileError">
                                        Please wait, file is uploading....
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div>
    <hr>
    <div ng-style="uploadDocument.isFilterOpen ? {'width': '500px'} : {}"
        ng-class="uploadDocument.isFilterOpen ? 'filter-div active no-print' : 'filter-div no-print'">
        <div class="row">
            <div class="col-12">
                <h5 class="filter-div-title">Edit Description</h5>
            </div>
        </div>
        <div class="filter-div-body">
            <form role="form" name="uploadDocument.editDiscriptionForm" novalidate>
                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label for="name" control-label>File Name</label>
                            <input readonly type="text" class="form-control cst-form-control" form-control
                                placeholder="Enter name" maxlength="300" name="name" id="name"
                                ng-model="uploadDocument.fileObject.fileName" required>
                        </div>
                        <div class="form-group">
                            <validate for='name' required-msg="Enter Discription">
                                <label for="name" control-label> Description</label>
                                <textarea type="text" class="form-control cst-form-control" form-control
                                    placeholder="Enter description" name="description" id="description"
                                    ng-model="uploadDocument.fileObject.description" required></textarea>
                                <placeholder></placeholder>
                            </validate>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <hr>
                        <div class="form-group text-right">
                            <button class="btn btn-secondary close-filter"
                                ng-click="uploadDocument.toggleFilter()">Close</button>
                            <button type="submit" class="btn btn-primary search-filter"
                                ng-click="uploadDocument.updateDescription()">Update</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="modal fade" id="actionModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="text">Add Folder</h4>
            </div>
            <div class="modal-body">
                <form role="form" name="uploadDocument.folderForm" id="folderForm" novalidate>
                    <h6> Folder will be added at location: {{uploadDocument.folderPath}}</h6>
                    <div class="form-group">
                        <label for="foldername" control-label>Folder Name</label>
                        <input type="text" class="form-control cst-form-control" form-control
                            placeholder="Enter folder name" maxlength="300" name="foldername" id="foldername"
                            ng-model="uploadDocument.folderName"
                            ng-change="uploadDocument.folderName = uploadDocument.folderName.toUpperCase()">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" ng-click="uploadDocument.closeModal()">Cancel</button>
                <button type="submit" class="btn btn-primary" ng-click="uploadDocument.createFolder()">Save</button>
            </div>
        </div>
    </div>
</div>
