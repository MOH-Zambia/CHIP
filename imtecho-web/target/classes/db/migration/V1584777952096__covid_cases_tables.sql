-- drop table if exists covid_cases;
-- 
-- create table covid_cases ( 
--     id serial,
--     member_id integer,
--     name varchar(1024),
--     age integer,
--     gender text,
--     contact_no varchar(10),
--     address text,
--     status text,
--     location integer,
--     created_by integer,
--     created_on timestamp without time zone,
--     modified_by integer,
--     modified_on timestamp without time zone,
--     CONSTRAINT covid_cases_pkey PRIMARY KEY (id)
-- );
-- 
-- 
-- drop table if exists covid_case_travel_history;
-- 
-- create table covid_case_travel_history(
--     id serial,
--     cases_id integer,
--     place_of_origin text,
--     destination text,
--     mode_of_transport integer,
--     flight_no text,
--     flight_seat_no text,
--     train_no text,
--     train_seat_no text,
--     bus_detail text,
--     travel_agency_detail text,
--     purpose_of_travel integer,
--     created_by integer,
--     created_on timestamp without time zone,
--     modified_by integer,
--     modified_on timestamp without time zone 
-- );
-- 
-- drop table if exists covid_case_contact_history;
-- 
-- create table covid_case_contact_history (
--     id serial,
--     cases_id integer,
--     travel_history_id integer,
--     person_name text,
--     contact_no text,
--     location text,
--     created_by integer,
--     created_on timestamp without time zone,
--     modified_by integer,
--     modified_on timestamp without time zone 
-- );
-- 
-- delete from menu_config where menu_name = 'COVID-19 Manage Cases';
-- 
-- insert into menu_config
-- (group_id,active,menu_name,navigation_state,menu_type)
-- values
-- ((select id from menu_group where group_name='COVID-19'),true,'COVID-19 Manage Cases','techo.manage.covidcases','manage');
-- 
-- delete from query_master where code = 'covid19_case_insert_data';
-- 
-- INSERT INTO public.query_master
-- (created_by, created_on, modified_by, modified_on, code, params, query, returns_result_set, state, description, is_public)
-- VALUES(1, now(), 1, now(), 'covid19_case_insert_data', 'modified_on,address,gender,created_on,contact_no,name,modified_by,location,created_by,age,status', 'insert into covid_cases(name,age,gender,contact_no,address,status, location,created_by, created_on, modified_on, modified_by)
-- values(
-- ''#name#'', ''#age#'', 
-- ''#gender#'', ''#contact_no#'', ''#address#'',  ''#status#'', ''#location#'',
-- ''#created_by#'',''#created_on#'', ''#modified_on#'', ''#modified_by#''
-- )
-- returning id;', true, 'ACTIVE', NULL, NULL);
-- 
-- 
-- delete from query_master where code = 'covid19_case_update_data';
-- 
-- INSERT INTO public.query_master
-- (created_by, created_on, modified_by, modified_on, code, params, query, returns_result_set, state, description, is_public)
-- VALUES(1, now(), 1, now(), 'covid19_case_update_data', 'modified_on,address,gender,contact_no,name,modified_by,location,id,age,status', 'update covid_cases
-- set name =''#name#'' ,
-- age =''#age#'' ,
-- gender =''#gender#'' ,
-- contact_no =''#contact_no#'' ,
-- address =''#address#'' ,
-- status =''#status#'' ,
-- location=''#location#'',
-- modified_on = ''#modified_on#'' ,
-- modified_by =  ''#modified_by#''
-- where id = ''#id#''', false, 'ACTIVE', NULL, NULL);
-- 
-- 
-- delete from query_master where code = 'covid19_case_select_all';
-- 
-- INSERT INTO public.query_master
-- (created_by, created_on, modified_by, modified_on, code, params, query, returns_result_set, state, description, is_public)
-- VALUES(1, now(), 1, now(), 'covid19_case_select_all', NULL, 'with parent_locations as(
-- 	select cc.*,
-- 	lhcd.parent_id , lhcd.child_id, lhcd.depth 
-- 	from location_hierchy_closer_det lhcd
-- 	inner join covid_cases cc on lhcd.child_id = cc.location
-- 	order by lhcd.depth desc
-- )
-- select prt.id,prt.name ,prt.age,prt.gender,prt.contact_no,prt.address,prt.status,prt.location as "locationId",
-- string_agg(lm.name, ''>'' ) as "location"
-- from parent_locations prt
-- inner join location_master lm
-- on lm.id = prt.parent_id
-- group by prt.id,prt.name ,prt.age,prt.gender,prt.contact_no,prt.address,prt.status,prt.location', true, 'ACTIVE', NULL, NULL);
-- 
-- 
-- delete from query_master where code = 'covid19_case_select_by_id';
-- 
-- INSERT INTO public.query_master
-- (created_by, created_on, modified_by, modified_on, code, params, query, returns_result_set, state, description, is_public)
-- VALUES(1, now(), 1, now(), 'covid19_case_select_by_id_delete', 'id', 'with parent_locations as(
-- 	select cc.*,
-- 	lhcd.parent_id , lhcd.child_id, lhcd.depth 
-- 	from location_hierchy_closer_det lhcd
-- 	inner join covid_cases cc on lhcd.child_id = cc.location
--         where cc.id=''#id#''
-- 	order by lhcd.depth desc
-- )
-- select prt.id,prt.name ,prt.age,prt.gender,prt.contact_no,prt.address,prt.status,prt.location as "locationId",
-- string_agg(lm.name, ''>'' ) as "location"
-- from parent_locations prt
-- inner join location_master lm
-- on lm.id = prt.parent_id
-- group by prt.id,prt.name ,prt.age,prt.gender,prt.contact_no,prt.address,prt.status,prt.location', true, 'ACTIVE', NULL, NULL);
-- 
